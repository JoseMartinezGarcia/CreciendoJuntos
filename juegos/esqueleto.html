<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jugando con Huesos</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
</head>
<body>
    <script>
        // Configuración del juego
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        const game = new Phaser.Game(config);

        let skeletonImage; // Imagen del esqueleto
        let boneNames = ['Cráneo', 'Húmero', 'Fémur', 'Costillas', 'Radio']; // Huesos a aprender
        let draggableLabels = []; // Etiquetas arrastrables
        let targetPositions = []; // Posiciones objetivo para los huesos

        function preload() {
            // Cargar la imagen del esqueleto desde una URL pública (puedes cambiar esto por tu imagen)
            this.load.image('skeleton', 'assets/esqueleto/esqueleto.jpeg');
        }

        function create() {
            // Agregar la imagen del esqueleto al centro del lienzo
            skeletonImage = this.add.image(400, 300, 'skeleton').setScale(0.8);

            // Posiciones objetivo de los huesos en la imagen
            targetPositions = [
                { name: 'Cráneo', x: 400, y: 100 },
                { name: 'Húmero', x: 300, y: 250 },
                { name: 'Fémur', x: 400, y: 450 },
                { name: 'Costillas', x: 400, y: 200 },
                { name: 'Radio', x: 500, y: 350 },
            ];

            // Crear etiquetas arrastrables con los nombres de los huesos
            boneNames.forEach((name, index) => {
                let label = this.add.text(100, 100 + index * 60, name, { 
                    fontSize: '20px', 
                    fill: '#ffffff', 
                    backgroundColor: '#000000' 
                });

                label.setInteractive({ draggable: true });
                this.input.setDraggable(label);

                draggableLabels.push({ label, name });
            });

            // Función de arrastre de etiquetas
            this.input.on('drag', (pointer, gameObject, dragX, dragY) => {
                gameObject.x = dragX;
                gameObject.y = dragY;
            });

            // Soltar la etiqueta y verificar la posición
            this.input.on('dragend', (pointer, gameObject) => {
                const boneLabel = draggableLabels.find(b => b.label === gameObject);
                const target = targetPositions.find(t => t.name === boneLabel.name);

                if (Phaser.Math.Distance.Between(gameObject.x, gameObject.y, target.x, target.y) < 50) {
                    gameObject.x = target.x;
                    gameObject.y = target.y;
                    gameObject.setStyle({ fill: '#00ff00' }); // Color verde si es correcto
                    gameObject.disableInteractive(); // Bloquear si ya está en posición correcta
                } else {
                    gameObject.setStyle({ fill: '#ff0000' }); // Color rojo si es incorrecto
                }
            });
        }

        function update() {
            // No se necesita lógica de actualización en este ejemplo
        }
    </script>
</body>
</html>
